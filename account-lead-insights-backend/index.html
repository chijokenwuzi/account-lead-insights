<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Account Lead Insights Backend | Team Ad Ops Workspace</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Outfit:wght@500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-orb bg-orb-a" aria-hidden="true"></div>
    <div class="bg-orb bg-orb-b" aria-hidden="true"></div>

    <header class="topbar">
      <div>
        <p class="eyebrow">Account Lead Insights Backend</p>
        <h1>Team Ad Ops Workspace</h1>
        <p class="subtext">Run Facebook and Google campaigns for customers with controlled automation.</p>
      </div>
      <div class="topbar-actions">
        <a id="backToLandingBtn" class="btn btn-secondary" href="/go-landing">Back</a>
      </div>
    </header>

    <div class="workspace-scroll">
      <main class="shell">
        <aside class="panel roster-panel">
          <div class="panel-head">
            <h2>Customer Roster</h2>
            <p>Select who the team is operating for.</p>
          </div>
          <ul id="customerList" class="customer-list"></ul>

          <form id="customerForm" class="form-stack">
            <h3>Add Customer</h3>
            <label>
              Company name
              <input name="companyName" type="text" maxlength="140" required placeholder="Northline Dental" />
            </label>
            <label>
              Industry
              <input name="industry" type="text" maxlength="140" required placeholder="Healthcare" />
            </label>
            <label>
              Service tier
              <select name="tier">
                <option value="Core">Core</option>
                <option value="Growth">Growth</option>
                <option value="Enterprise">Enterprise</option>
              </select>
            </label>
            <label>
              Website
              <input name="website" type="url" maxlength="280" placeholder="https://clientdomain.com" />
            </label>
            <label>
              Location / geo focus
              <input name="location" type="text" maxlength="140" placeholder="Florida" />
            </label>
            <label>
              Default offer
              <input name="defaultOffer" type="text" maxlength="220" placeholder="Free consult for new patients" />
            </label>
            <label>
              Default audience
              <input name="defaultAudience" type="text" maxlength="220" placeholder="Adults 28-55 looking for cosmetic dentistry" />
            </label>
            <label>
              Default landing URL
              <input name="defaultLandingUrl" type="url" maxlength="280" placeholder="https://clientdomain.com/offer" />
            </label>
            <label>
              Customer notes
              <textarea
                name="customerNotes"
                rows="3"
                maxlength="1500"
                placeholder="Brand constraints, compliance notes, USP, or positioning details"
              ></textarea>
            </label>
            <button class="btn btn-secondary" type="submit">Add Customer</button>
            <p id="customerMessage" class="message"></p>
          </form>
        </aside>

        <section class="main-grid">
          <section class="metric-grid">
            <article class="metric-card">
              <p>Customers</p>
              <strong id="metricCustomers">0</strong>
            </article>
            <article class="metric-card">
              <p>Live Campaigns</p>
              <strong id="metricLive">0</strong>
            </article>
          </section>

          <section class="ops-grid">
            <article class="panel">
              <div class="panel-head">
                <h2>Campaign Builder</h2>
                <p>
                  Add campaign + artifact inputs once. The system will generate 2-3 Facebook/Google input packs and
                  create specific campaigns on the board below.
                </p>
                <p id="openAiStatus" class="subtext"></p>
              </div>
              <form id="buildCampaignForm" class="form-grid">
                <label>
                  Customer
                  <select id="buildCustomer" name="customerId"></select>
                </label>
                <div class="full choice-row">
                  <button id="loadCustomerDefaultsBtn" class="btn btn-secondary" type="button">Load Customer Defaults</button>
                  <p id="customerDefaultsHint" class="subtext"></p>
                </div>
                <label>
                  Base campaign name
                  <input name="campaignBaseName" type="text" maxlength="160" required placeholder="Q2 Smile Makeover" />
                </label>
                <label>
                  Objective
                  <input name="objective" type="text" maxlength="80" required placeholder="Leads, Sales, Booked Calls" value="Leads" />
                </label>
                <label class="help-label">
                  <span class="label-text">Automation mode</span>
                  <details class="help-pop">
                    <summary aria-label="Automation mode help">i</summary>
                    <div class="help-popover">Choose how much the system decides automatically: Assist = manual-heavy, Hybrid = mixed control, Autopilot = automation-first. Example: Start new clients on Hybrid, move stable winners to Autopilot.</div>
                  </details>
                  <input name="mode" type="text" maxlength="40" list="modeSuggestions" value="Hybrid" />
                </label>
                <datalist id="modeSuggestions">
                  <option value="Assist"></option>
                  <option value="Hybrid"></option>
                  <option value="Autopilot"></option>
                </datalist>
                <label>
                  Total daily budget (USD)
                  <input name="dailyBudget" type="number" min="50" max="50000" step="10" value="300" required />
                </label>
                <label class="help-label">
                  <span class="label-text">Target CPA/CPL (USD)</span>
                  <details class="help-pop">
                    <summary aria-label="Target CPA/CPL help">i</summary>
                    <div class="help-popover">Your target cost per result. CPA = cost per acquisition, CPL = cost per lead. The generator uses this to shape offer strength and channel mix. Example: If a booked call is worth $600, you might set target CPA to $90.</div>
                  </details>
                  <input name="targetCpa" type="number" min="5" max="5000" step="1" value="75" required />
                </label>
                <fieldset class="full channel-fieldset">
                  <legend>Build For</legend>
                  <div class="choice-row">
                    <label class="choice-chip"><input type="checkbox" name="buildChannels" value="Facebook" checked /> Facebook Ads</label>
                    <label class="choice-chip"><input type="checkbox" name="buildChannels" value="Google" checked /> Google Ads</label>
                  </div>
                </fieldset>
                <label>
                  CTA
                  <input name="cta" type="text" maxlength="40" value="Learn More" placeholder="Learn More" />
                </label>
                <label>
                  Artifact name
                  <input name="artifactName" type="text" maxlength="160" placeholder="Founder VSL v3" />
                </label>
                <label class="full">
                  Offer summary
                  <input name="offer" type="text" maxlength="220" placeholder="Whiter smile package in 10 days" />
                </label>
                <label class="full">
                  Landing URL
                  <input name="landingUrl" type="url" maxlength="280" placeholder="https://clientdomain.com/offer" />
                </label>
                <label class="full help-label">
                  <span class="label-text">Artifact content</span>
                  <details class="help-pop">
                    <summary aria-label="Artifact content help">i</summary>
                    <div class="help-popover">Paste core source material here (VSL transcript, angle notes, claims, testimonials). Better source content gives better ad options. Example: "10-minute VSL transcript + 3 testimonials + top 5 objections."</div>
                  </details>
                  <textarea
                    name="artifactText"
                    rows="4"
                    maxlength="2200"
                    placeholder="Paste transcript, VSL notes, claims, testimonials, differentiators, and audience notes"
                  ></textarea>
                </label>
                <label class="full">
                  Primary audience
                  <input name="audience" type="text" maxlength="200" placeholder="Example: US parents with kids 4-10 and recent purchase intent" />
                </label>
                <label class="full help-label">
                  <span class="label-text">Campaign instructions</span>
                  <details class="help-pop">
                    <summary aria-label="Campaign instructions help">i</summary>
                    <div class="help-popover">Specific guardrails or strategy instructions for this campaign only: tone, compliance limits, banned claims, priorities, and exclusions. Example: "No before/after claims. Keep tone clinical. Prioritize free consult offer."</div>
                  </details>
                  <textarea
                    name="strategyNotes"
                    rows="3"
                    maxlength="1800"
                    placeholder="Any direction for tone, offers to prioritize, exclusions, policy constraints, etc."
                  ></textarea>
                </label>
                <label class="full help-label">
                  <span class="label-text">Extra input values (JSON or plain text)</span>
                  <details class="help-pop">
                    <summary aria-label="Extra input values help">i</summary>
                    <div class="help-popover">Optional structured context like funnel stage, promo window, geo splits, or offer variants. JSON is best if you want consistent output formatting. Example: {"funnelStage":"MOFU","promoWindow":"14 days","geo":"Texas"}.</div>
                  </details>
                  <textarea
                    name="customInputs"
                    rows="4"
                    maxlength="4000"
                    placeholder='{"funnelStage":"MOFU","promoWindow":"14 days","location":"Texas"}'
                  ></textarea>
                </label>
                <label>
                  Creative type
                  <select name="creativeType">
                    <option value="image" selected>Image</option>
                    <option value="video">Video</option>
                  </select>
                </label>
                <label class="help-label">
                  <span class="label-text">Creative media URL</span>
                  <details class="help-pop">
                    <summary aria-label="Creative media URL help">i</summary>
                    <div class="help-popover">Direct URL to the image/video asset used in previews and publish payloads. Use a publicly reachable file link. Example: https://cdn.client.com/creative/smile-offer-v2.mp4.</div>
                  </details>
                  <input name="creativeUrl" type="url" maxlength="400" placeholder="https://cdn.client.com/ad-creative.jpg" />
                </label>
                <button class="btn btn-primary full" type="submit">Build Campaigns + Generate Ad Input Packs</button>
                <p id="buildCampaignMessage" class="message full"></p>
              </form>
            </article>

            <article class="panel">
              <div class="panel-head">
                <h2>Channel Connections</h2>
                <p>Store account details and mark channels as connected. API calls can be plugged in later.</p>
              </div>
              <div class="integration-grid">
                <form id="facebookConnectForm" class="integration-card form-stack" data-platform="facebook">
                  <h3>Facebook Ads</h3>
                  <p id="facebookConnectStatus" class="subtext"></p>
                  <label>
                    Account name
                    <input name="accountName" type="text" maxlength="140" placeholder="Northline Dental Ads" />
                  </label>
                  <label class="help-label">
                    <span class="label-text">Account ID</span>
                    <details class="help-pop">
                      <summary aria-label="Facebook account ID help">i</summary>
                      <div class="help-popover">Meta Ads account identifier. Usually starts with <code>act_</code>. Required for future direct publishing. Example: <code>act_123456789012345</code>.</div>
                    </details>
                    <input name="accountId" type="text" maxlength="80" placeholder="act_1234567890" />
                  </label>
                  <label class="help-label">
                    <span class="label-text">Business ID (optional)</span>
                    <details class="help-pop">
                      <summary aria-label="Facebook business ID help">i</summary>
                      <div class="help-popover">Meta Business Manager ID tied to this ad account. Useful when one business controls multiple assets. Example: <code>987654321098765</code>.</div>
                    </details>
                    <input name="businessId" type="text" maxlength="80" placeholder="1234567890" />
                  </label>
                  <label class="help-label">
                    <span class="label-text">Token / credential hint</span>
                    <details class="help-pop">
                      <summary aria-label="Facebook token hint help">i</summary>
                      <div class="help-popover">Placeholder for credential tracking in this UI. For production, store real API secrets in server env vars, not in form fields. Example: "Meta token added in Render env on Feb 14."</div>
                    </details>
                    <input name="tokenHint" type="text" maxlength="220" placeholder="Paste token or secret hint" />
                  </label>
                  <div class="choice-row">
                    <button class="btn btn-secondary" type="submit">Save + Connect</button>
                    <button class="btn btn-secondary" type="button" data-disconnect-platform="facebook">Disconnect</button>
                  </div>
                </form>

                <form id="googleConnectForm" class="integration-card form-stack" data-platform="google">
                  <h3>Google Ads</h3>
                  <p id="googleConnectStatus" class="subtext"></p>
                  <label>
                    Account name
                    <input name="accountName" type="text" maxlength="140" placeholder="Northline Dental Google" />
                  </label>
                  <label class="help-label">
                    <span class="label-text">Customer ID</span>
                    <details class="help-pop">
                      <summary aria-label="Google customer ID help">i</summary>
                      <div class="help-popover">Google Ads account ID in <code>123-456-7890</code> format. Required for future direct publishing. Example: <code>123-456-7890</code>.</div>
                    </details>
                    <input name="accountId" type="text" maxlength="80" placeholder="123-456-7890" />
                  </label>
                  <label class="help-label">
                    <span class="label-text">Manager ID (optional)</span>
                    <details class="help-pop">
                      <summary aria-label="Google manager ID help">i</summary>
                      <div class="help-popover">MCC/manager account ID if this customer account is managed under a parent Google Ads manager. Example: <code>555-888-1212</code>.</div>
                    </details>
                    <input name="businessId" type="text" maxlength="80" placeholder="098-765-4321" />
                  </label>
                  <label class="help-label">
                    <span class="label-text">Token / credential hint</span>
                    <details class="help-pop">
                      <summary aria-label="Google token hint help">i</summary>
                      <div class="help-popover">Placeholder for credential tracking in this UI. For production, keep actual tokens/secrets in server environment variables. Example: "OAuth refresh token stored in secret manager."</div>
                    </details>
                    <input name="tokenHint" type="text" maxlength="220" placeholder="Paste token or secret hint" />
                  </label>
                  <div class="choice-row">
                    <button class="btn btn-secondary" type="submit">Save + Connect</button>
                    <button class="btn btn-secondary" type="button" data-disconnect-platform="google">Disconnect</button>
                  </div>
                </form>
              </div>
              <p id="integrationMessage" class="message"></p>
            </article>
          </section>

          <section class="panel ad-output-panel">
            <div class="panel-head">
              <h2>Generated Ad Input Packs</h2>
              <p>Use arrows to move ad-by-ad. Two ads are shown per page across all generated Facebook and Google entries.</p>
            </div>
            <div id="adInputRuns" class="ad-run-list"></div>
          </section>

          <section class="panel ad-output-panel">
            <div class="panel-head">
              <h2>Publish Queue</h2>
              <p>API-ready publish jobs. Queue from generated options, then mark sent/failed/retry.</p>
            </div>
            <div id="publishQueue" class="queue-list"></div>
            <p id="publishMessage" class="message"></p>
          </section>
        </section>
      </main>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
